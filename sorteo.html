<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" type="image/x-icon" href="./img/IconoBlanco.ico">
    <title>Makao Casino</title>
    <!-- CSS only -->
    <link rel="stylesheet" href="css/Style.css" type="text/css" media="screen" />
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="js/TweenMax.min.js"></script>
    <script src="js/Winwheel.min.js"></script>
</head>
<body>
    <br />
    <img src="./img/logo.jpg" id="logo" />
    <h1 id="titulo">Makao Casino</h1>
    <input type="button" id="volver" class="btn btn-outline-light btn-lg" value="Volver" 
           onclick="location.href='index.html'" style="margin:3% 0 0 10%" />
    <center>
        <audio id="celebrar" src="audio/Celebracion.mp3" preload="auto"></audio>
        <audio id="sorteo" src="audio/Alarma.mp3" autoplay="autoplay"></audio>
        <input type="button" id="ruleta" class="btn btn-outline-light btn-lg" value="Girar" onclick="miRuleta.startAnimation();" />
        <br />
        <br />
        <canvas id="canvas" height="550" width="550"></canvas>
        <script>
            var miRuleta = new Winwheel({
                'numSegments': 50,
                'outerRadius': 250,
                'segments': [
                    { 'fillStyle': '#70F538', 'text': 'Jugador #49' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #15' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #18' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #33' },
                    { 'fillStyle': '#F502E3', 'text': 'Jugador #4' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #48' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #22' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #2' },
                    { 'fillStyle': '#26E8F5', 'text': 'Jugador #26' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #19' },
                    { 'fillStyle': '#A20A6A', 'text': 'Jugador #36' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #16' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #45' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #7' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #24' },
                    { 'fillStyle': '#F502E3', 'text': 'Jugador #34' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #21' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #46' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #38' },
                    { 'fillStyle': '#26E8F5', 'text': 'Jugador #40' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #35' },
                    { 'fillStyle': '#A20A6A', 'text': 'Jugador #25' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #8' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #23' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #50' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #27' },
                    { 'fillStyle': '#F502E3', 'text': 'Jugador #20' },//aqui
                    { 'fillStyle': '#70F538', 'text': 'Jugador #37' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #10' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #44' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #30' },
                    { 'fillStyle': '#F502E3', 'text': 'Jugador #42' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #47' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #28' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #5' },
                    { 'fillStyle': '#26E8F5', 'text': 'Jugador #13' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #31' },
                    { 'fillStyle': '#A20A6A', 'text': 'Jugador #1' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #17' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #29' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #6' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #41' },//aqui
                    { 'fillStyle': '#70F538', 'text': 'Jugador #14' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #32' },
                    { 'fillStyle': '#d30000', 'text': 'Jugador #3' },
                    { 'fillStyle': '#F502E3', 'text': 'Jugador #43' },
                    { 'fillStyle': '#70F538', 'text': 'Jugador #9' },
                    { 'fillStyle': '#F5F31A', 'text': 'Jugador #12' },
                    { 'fillStyle': '#1B3AF5', 'text': 'Jugador #39' },
                    { 'fillStyle': '#A20A6A', 'text': 'Jugador #11' },
                    
                ],
                'animation': {
                    'type': 'spinToStop',
                    'duration': 5,
                    'callbackFinished': 'Mensaje()',
                    'callbackAfter': 'sonar()',
                    'callbackAfter': 'dibujarIndicador()'
                }
            });
            sonar();
            function sonar() {
                let boton = document.querySelector("#ruleta");

                boton.addEventListener("click", () => {
                    let etiquetaAudio = document.createElement("audio")
                    etiquetaAudio.setAttribute("src", "./audio/Ruleta.mp3")
                    etiquetaAudio.play()
                });
            }
            function Mensaje() {
                var SegmentoSeleccionado = miRuleta.getIndicatedSegment();
                document.getElementById('celebrar').play();
                alert("Ganaste: " + SegmentoSeleccionado.text + " !");
                //Reinicio de la ruleta
                miRuleta.stopAnimation(false);
                miRuleta.rotationAngle = 0;
                miRuleta.draw();
                dibujarIndicador();

            }
            dibujarIndicador();
            function dibujarIndicador() {
                var ctx = miRuleta.ctx;
                ctx.strokeStyle = 'navy';
                ctx.fillStyle = '#0D0D0D';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(245, 0);
                ctx.lineTo(305, 0);
                ctx.lineTo(275, 45);
                ctx.lineTo(246, 0);
                ctx.stroke();
                ctx.fill();
            }

            function carga_sonido() {
                document.getElementById('sorteo').innerHTML = '<embed src="../audio/Celebracion.mp3" autostart="true" />'
            }
        </script>
    </center>
</body>
</html>
